"use strict";(self.webpackChunkangular_starter=self.webpackChunkangular_starter||[]).push([[331],{9331:(L,c,a)=>{a.r(c),a.d(c,{LoginModule:()=>G});var h=a(7455),u=a(6728),p=a(177),n=a(4341),f=a(491),v=a(5114),d=a(1935),e=a(4438),N=a(876),w=a(5779),y=a(8403),M=a(7203),F=a(2283);const C=t=>({"p-focus":t}),S=t=>({"btn-waiting":t});function x(t,l){1&t&&e.nrm(0,"p-message",16)}function j(t,l){1&t&&e.nrm(0,"p-message",17)}function E(t,l){if(1&t&&e.DNE(0,x,1,0,"p-message",16)(1,j,1,0,"p-message",17),2&t){const o=l,s=e.XpG();e.vxM(0,o===s.authStateType.sessionExpired?0:-1),e.R7$(),e.vxM(1,o===s.authStateType.loggedOut?1:-1)}}function I(t,l){1&t&&e.nrm(0,"p-message",4)}const g="savedUserName",T=d.iI.forChild([{path:"",component:(()=>{class t{constructor(o,s,r,i,m){this.authService=o,this.route=s,this.router=r,this.fb=i,this.dom=m,this.formMain=this.fb.group({userName:new n.FormControl("juser",{validators:n.Validators.required,nonNullable:!0}),password:new n.FormControl("password",{validators:n.Validators.required,nonNullable:!0}),remember:new n.FormControl(!1,{nonNullable:!0})}),this.state=(0,e.vPA)({waiting:!1,error:null,showErrorDetails:!1,loggedout:!1,showPassword:!0}),this.authState$=this.authService.authState$,this.authStateType=u.kj}ngOnInit(){const o=this.dom.localStorage?.getItem(g);o&&this.formMain.patchValue({userName:o,remember:!0}),this.authService.logOutModal=null}onLogin(){this.state.update(o=>({...o,waiting:!0,error:null,showErrorDetails:!1})),this.formMain&&this.formMain.value.remember?this.dom.localStorage?.setItem(g,this.formMain.value.userName||""):this.dom.localStorage?.removeItem(g),this.authService.logIn(this.formMain.value).subscribe(()=>{this.router.navigate([this.route.snapshot.queryParams.returnUrl||"/"]),this.state.update(s=>({...s,waiting:!1}))},o=>{o.errorMsg="Error logging in.",(o.statusText="Unauthorized")&&(o.errorMsg="Invalid username or password, please try again.",this.state.update(s=>({...s,showErrorDetails:!1}))),this.state.update(s=>({...s,error:o,waiting:!1}))})}ngOnDestroy(){}static#e=this.\u0275fac=function(s){return new(s||t)(e.rXU(u.uR),e.rXU(d.nX),e.rXU(d.Ix),e.rXU(n.NonNullableFormBuilder),e.rXU(N.K5))};static#t=this.\u0275cmp=e.VBU({type:t,selectors:[["app-login"]],decls:30,vars:15,consts:[[1,"container","mt-5"],[1,"m-auto",2,"max-width","480px"],["novalidate","",3,"ngSubmit","formGroup"],["icon","user"],["severity","danger","text","Unable to log in, please check your username and password"],[1,"mb-4"],[1,"p-float-label","mb-4",3,"ngClass"],["id","userName","type","text","size","30","pInputText","","formControlName","userName",1,"w-100","p-inputtext","p-corner-all","p-state-default","p-widget"],["for","userName"],["id","password","type","password","size","30","pInputText","","formControlName","password",1,"w-100","p-inputtext","p-corner-all","p-state-default","p-widget"],["for","password"],[1,"form-check-label"],["type","checkbox","formControlName","remember",1,"form-check-input","remember"],[1,"text-end"],["type","submit",1,"btn","btn-primary",3,"disabled","ngClass"],["icon","power-off",1,"me-2"],["severity","warning","styleClass","w-100 mb-3","text","Session expired, please log in again"],["severity","success","styleClass","w-100 mb-3","text","You have successfully logged out"]],template:function(s,r){if(1&s&&(e.nrm(0,"app-header"),e.j41(1,"div",0)(2,"div",1)(3,"form",2),e.bIt("ngSubmit",function(){return r.onLogin()}),e.j41(4,"h1"),e.nrm(5,"app-icons",3),e.EFF(6," Please sign in"),e.k0s(),e.j41(7,"p-card"),e.DNE(8,E,2,2),e.nI1(9,"async"),e.DNE(10,I,1,0,"p-message",4),e.j41(11,"p",5),e.EFF(12,"Please enter your username and password."),e.k0s(),e.j41(13,"p",6),e.nrm(14,"input",7),e.j41(15,"label",8),e.EFF(16,"Username"),e.k0s()(),e.j41(17,"p",6),e.nrm(18,"input",9),e.j41(19,"label",10),e.EFF(20,"Password"),e.k0s()(),e.j41(21,"label",11),e.nrm(22,"input",12),e.EFF(23," Remember my username "),e.k0s(),e.j41(24,"p-footer")(25,"div",13)(26,"button",14),e.nrm(27,"app-icons",15),e.EFF(28," Sign In "),e.k0s()()()()()()(),e.nrm(29,"app-footer")),2&s){let i,m,b;e.R7$(3),e.Y8G("formGroup",r.formMain),e.R7$(5),e.vxM(8,(i=e.bMT(9,7,r.authState$))?8:-1,i),e.R7$(2),e.vxM(10,r.state().error?10:-1),e.R7$(3),e.Y8G("ngClass",e.eq3(9,C,!(null==(m=r.formMain.get("userName"))||!m.value))),e.R7$(4),e.Y8G("ngClass",e.eq3(11,C,!(null==(b=r.formMain.get("userName"))||!b.value))),e.R7$(9),e.Y8G("disabled",r.formMain.invalid||r.state().waiting)("ngClass",e.eq3(13,S,r.state().waiting))}},dependencies:[p.YU,w.wi,n.\u0275NgNoValidate,n.DefaultValueAccessor,n.CheckboxControlValueAccessor,n.NgControlStatus,n.NgControlStatusGroup,n.FormGroupDirective,n.FormControlName,f.Card,v.C,y.n,M.l,F.IconsComponent,p.Jj],encapsulation:2})}return t})(),data:{title:"Home"}}]);let G=(()=>{class t{static#e=this.\u0275fac=function(s){return new(s||t)};static#t=this.\u0275mod=e.$C({type:t});static#o=this.\u0275inj=e.G2t({imports:[p.MD,u.Gg,n.FormsModule,n.ReactiveFormsModule,f.CardModule,v.u,T,h.YD,h.Gs]})}return t})()}}]);